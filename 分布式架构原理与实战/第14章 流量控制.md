#### 1.静态流量控制
- 主要针对客户端访问速率进行控制，根据服务质量等级协定（SLA）约定的QPS做全局流量控制
- 由服务注册中心以流控周期T为单位，动态推送每个节点的流控阀值

#### 2.动态流量控制
- 目标是保命，不是对流量或者访问速度进行控制。当系统负载压力非常大时，系统进入过负载状态，可能cpu，内存资源已过负载，也可能应用进程内资源耗尽，如果全量处理业务会导致Full GC，消息积压严重，应用宕机，最终将压力转移到其他集群节点，引起级联故障
- 动态流控因子
    - 应用进程所在主机／VM的CPU使用率
    - 应用进程所在主机／VM的内存使用率
    - 可以通过java.lang.Process执行top sar等外部命令获取系统资源使用情况
- 分级流控，不同负载级别拒绝的消息比例不同

#### 3.并发控制
- 针对线程的并发执行数进行控制，本质是限制对某个服务或者服务的方法进行过度消费，耗用过多资源而影响其他服务的正常运行。
    - 针对服务提供者的全局控制
    - 针对服务消费者的全局控制

#### 4.连接控制
- 分布式框架服务提供者和消费者之间采用长连接私有协议，为了防止消费者连接数过多导致服务端压力过大，系统需要针对连接数进控制

***
### 总结
> 流量控制是保障服务SLA的重要措施，也是业务高峰期故障预防和恢复的有效手段。
分布式框架需要支持不同的流量控制策略，还要支持流控阀值、策略的在线调整，不需要重启即可动态生效，提升服务治理的效率和敏捷性。